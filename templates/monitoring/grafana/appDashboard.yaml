{{- $files := .Files.Glob "grafanaDashboard/app/*.json" }}
{{- range $path, $bytes := $files }}
{{- $name := trimSuffix ".json" (base $path) }}
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: {{ printf "grafana-%s" $name | lower }}
  namespace: {{ $.Values.monitoring.namespace }}
spec:
  instanceSelector:
    matchLabels:
      grafana: neves
  folder: "app"
  json: |
{{ $.Files.Get $path | nindent 4 }}

{{- end }}